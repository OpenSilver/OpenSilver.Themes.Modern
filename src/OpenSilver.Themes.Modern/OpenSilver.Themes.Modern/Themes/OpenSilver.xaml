<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:vsm="clr-namespace:System.Windows;assembly=OpenSilver"
                    xmlns:system="clr-namespace:System;assembly=mscorlib"
                    xmlns:local="clr-namespace:OpenSilver.Themes.Modern">

    <!--ValidationTooltipTemplate-->
    <ControlTemplate x:Key="ValidationToolTipTemplate">
        <Grid x:Name="Root"
              Margin="5,0"
              Opacity="0"
              RenderTransformOrigin="0,0">
            <vsm:VisualStateManager.VisualStateGroups>
                <vsm:VisualStateGroup x:Name="OpenStates">
                    <vsm:VisualStateGroup.Transitions>
                        <vsm:VisualTransition GeneratedDuration="0" />
                        <vsm:VisualTransition GeneratedDuration="0:0:0.2"
                                              To="Open">
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="xform"
                                                               Storyboard.TargetProperty="X">
                                    <SplineDoubleKeyFrame KeyTime="0:0:0.2"
                                                          Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="Root"
                                                               Storyboard.TargetProperty="Opacity">
                                    <SplineDoubleKeyFrame KeyTime="0:0:0.2"
                                                          Value="1" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </vsm:VisualTransition>
                    </vsm:VisualStateGroup.Transitions>
                    <vsm:VisualState x:Name="Closed">
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="Root"
                                                           Storyboard.TargetProperty="Opacity">
                                <SplineDoubleKeyFrame KeyTime="0"
                                                      Value="0" />
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </vsm:VisualState>
                    <vsm:VisualState x:Name="Open">
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="xform"
                                                           Storyboard.TargetProperty="X">
                                <SplineDoubleKeyFrame KeyTime="0"
                                                      Value="0" />
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="Root"
                                                           Storyboard.TargetProperty="Opacity">
                                <SplineDoubleKeyFrame KeyTime="0"
                                                      Value="1" />
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </vsm:VisualState>
                </vsm:VisualStateGroup>
            </vsm:VisualStateManager.VisualStateGroups>
            <Grid.RenderTransform>
                <TranslateTransform x:Name="xform"
                                    X="-25" />
            </Grid.RenderTransform>
            <Border Background="{DynamicResource Theme_ErrorBrush}"
                    CornerRadius="4" />
            <Border CornerRadius="4">

                <TextBlock Margin="8,3,8,4"
                           MaxWidth="250"
                           UseLayoutRounding="false"
                           Foreground="{DynamicResource Theme_TextOnPrimaryBrush}"
                           Text="{Binding Path=(Validation.Errors)[0].ErrorContent}"
                           TextWrapping="Wrap" />
            </Border>
        </Grid>
    </ControlTemplate>

    <!-- Button -->
    <Style x:Key="FlatButtonStyle"
           TargetType="Button">
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextOnPrimaryBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <!--<Setter Property="BorderBrush" Value="{DynamicResource Theme_PrimaryBrush}" />-->
        <Setter Property="BorderThickness"
                Value="0" />
        <Setter Property="Padding"
                Value="8,2,8,2" />
        <Setter Property="Cursor"
                Value="Hand" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Grid.Resources>
                            <local:BrushBuilder x:Key="HoverBrushBuilder"
                                                BasedOn="{TemplateBinding Background}"
                                                BrightnessRatio="{DynamicResource Theme_HoverBrightnessRatio}"/>
                            <local:BrushBuilder x:Key="PressBrushBuilder"
                                                BasedOn="{TemplateBinding Background}"
                                                BrightnessRatio="{DynamicResource Theme_PressBrightnessRatio}"/>
                            <local:ColorInterpolator x:Key="DisabledBackgroundBuilder"
                                                BaseColor="{TemplateBinding Background}"
                                                TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledBackgroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Unfocused" />
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="HasFocus"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="00:00:00.2" />
                                    <vsm:VisualTransition From="Pressed"
                                                          GeneratedDuration="00:00:00" />
                                    <vsm:VisualTransition From="MouseOver"
                                                          GeneratedDuration="00:00:00"
                                                          To="Pressed" />
                                </vsm:VisualStateGroup.Transitions>
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding Source={StaticResource HoverBrushBuilder}, Path=Brush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding Source={StaticResource PressBrushBuilder}, Path=Brush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0" Value="0.5" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Border x:Name="Background"
                                CornerRadius="5"
                                Background="{TemplateBinding Background}"/>
                        <Border x:Name="HasFocus"
                                CornerRadius="6"
                                Background="{TemplateBinding Background}"
                                Margin="-1"
                                Opacity=".7"
                                Visibility="Collapsed" />
                        <ContentPresenter x:Name="contentPresenter"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          Margin="{TemplateBinding Padding}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="Button"
           BasedOn="{StaticResource FlatButtonStyle}" />

    <!-- ToggleButton -->
    <Style x:Name="FlatToggleButton"
           TargetType="ToggleButton">
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextOnPrimaryBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <!--<Setter Property="BorderBrush" Value="{DynamicResource Theme_PrimaryBrush}" />-->
        <Setter Property="BorderThickness"
                Value="0" />
        <Setter Property="Padding"
                Value="8,2,8,2" />
        <Setter Property="Cursor"
                Value="Hand" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Grid>
                        <Grid.Resources>
                            <local:BrushBuilder x:Key="HoverBrushBuilder"
                                                BasedOn="{TemplateBinding Background}"
                                                BrightnessRatio="{DynamicResource Theme_HoverBrightnessRatio}"/>
                            <local:BrushBuilder x:Key="PressBrushBuilder"
                                                BasedOn="{TemplateBinding Background}"
                                                BrightnessRatio="{DynamicResource Theme_PressBrightnessRatio}"/>
                            <local:ColorInterpolator x:Key="DisabledBackgroundBuilder"
                                                     BaseColor="{TemplateBinding Background}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledBackgroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="00:00:00.2" />
                                    <vsm:VisualTransition From="Pressed"
                                                          GeneratedDuration="00:00:00" />
                                    <vsm:VisualTransition From="MouseOver"
                                                          GeneratedDuration="00:00:00"
                                                          To="Pressed" />
                                </vsm:VisualStateGroup.Transitions>
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding Source={StaticResource HoverBrushBuilder}, Path=Brush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding Source={StaticResource PressBrushBuilder}, Path=Brush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0" Value="0.5" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="CheckStates">
                                <vsm:VisualState x:Name="Checked">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Toggled"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value=".6" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unchecked" />
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="HasFocus"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>

                        <Border x:Name="Background"
                                CornerRadius="5"
                                Background="{TemplateBinding Background}" />
                        <Border x:Name="HasFocus"
                                CornerRadius="6"
                                Background="{TemplateBinding Background}"
                                Margin="-1"
                                Opacity=".7"
                                Visibility="Collapsed" />
                        <Border x:Name="Toggled"
                                CornerRadius="5"
                                Background="{DynamicResource DisabledBrush}"
                                Opacity="0" />
                        <ContentPresenter x:Name="contentPresenter"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          Margin="{TemplateBinding Padding}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="ToggleButton"
           BasedOn="{StaticResource FlatToggleButton}" />

    <!--RepeatButton Style-->
    <Style x:Key="FlatRepeatButtonStyle"
        TargetType="RepeatButton">
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextOnPrimaryBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <!--<Setter Property="BorderBrush" Value="{DynamicResource Theme_PrimaryBrush}" />-->
        <Setter Property="BorderThickness"
                Value="0" />
        <Setter Property="Padding"
                Value="8,2,8,2" />
        <Setter Property="Cursor"
                Value="Hand" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RepeatButton">
                    <Grid Cursor="Hand"
                          TextOptions.TextHintingMode="Fixed">
                        <Grid.Resources>
                            <local:BrushBuilder x:Key="HoverBrushBuilder"
                                                BasedOn="{TemplateBinding Background}"
                                                BrightnessRatio="{DynamicResource Theme_HoverBrightnessRatio}"/>
                            <local:BrushBuilder x:Key="PressBrushBuilder"
                                                BasedOn="{TemplateBinding Background}"
                                                BrightnessRatio="{DynamicResource Theme_PressBrightnessRatio}"/>
                            <local:ColorInterpolator x:Key="DisabledBackgroundBuilder"
                                                     BaseColor="{TemplateBinding Background}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledBackgroundBuilder}, Path=ResultColor}" />

                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Unfocused" />
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                Storyboard.TargetName="HasFocus"
                                                                Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                             Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="00:00:00.2" />
                                    <vsm:VisualTransition From="Pressed"
                                                   GeneratedDuration="00:00:00" />
                                    <vsm:VisualTransition From="MouseOver"
                                                   GeneratedDuration="00:00:00"
                                                   To="Pressed" />
                                </vsm:VisualStateGroup.Transitions>
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding Source={StaticResource HoverBrushBuilder}, Path=Brush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding Source={StaticResource PressBrushBuilder}, Path=Brush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0" Value="0.5" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>

                        <Border x:Name="Background"
                                CornerRadius="5"
                                Background="{TemplateBinding Background}"/>
                        <Border x:Name="HasFocus"
                                CornerRadius="6"
                                Background="{TemplateBinding Background}"
                                Margin="-1"
                                Opacity=".7"
                                Visibility="Collapsed" />
                        <ContentControl x:Name="contentControl"
                                        Foreground="{DynamicResource Theme_TextOnPrimaryBrush}"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                            <ContentPresenter x:Name="contentPresenter"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="8,3" />
                        </ContentControl>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="RepeatButton"
           BasedOn="{StaticResource FlatRepeatButtonStyle}" />

    <!-- TextBox -->
    <Style x:Key="FlatTextBoxStyle"
           TargetType="TextBox">
        <Setter Property="Height"
                Value="32" />
        <Setter Property="Padding"
                Value="8,2,8,2" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="CaretBrush"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="IsEnabled"
                Value="True" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid x:Name="RootElement">
                        <Grid.Resources>
                            <local:ColorInterpolator x:Key="DisabledBorderBuilder"
                                                     BaseColor="{TemplateBinding BorderBrush}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <local:ColorInterpolator x:Key="DisabledForegroundBuilder"
                                                     BaseColor="{TemplateBinding Foreground}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            
                            <SolidColorBrush x:Key="DisabledBorderBrush"
                                             Color="{Binding Source={StaticResource DisabledBorderBuilder}, Path=ResultColor}" />
                            <SolidColorBrush x:Key="DisabledForegroundBrush"
                                             Color="{Binding Source={StaticResource DisabledForegroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="00:00:00.3" />
                                </vsm:VisualStateGroup.Transitions>
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="BorderColor"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderColor" Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBorderBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="ReadOnly" />
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="HasFocus"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="ValidationStates">
                                <vsm:VisualState x:Name="Valid" />
                                <vsm:VisualState x:Name="InvalidUnfocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="InvalidFocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                       Storyboard.TargetProperty="IsOpen">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <system:Boolean>True</system:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Border x:Name="Background"
                                CornerRadius="4"
                                BorderBrush="{DynamicResource Theme_BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}" />
                        <Border x:Name="BorderColor"
                                CornerRadius="4"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="Transparent"
                                Opacity="0" />
                        <Border x:Name="HasFocus"
                                CornerRadius="4"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="Transparent"
                                Visibility="Collapsed">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="0"
                                                  Color="{Binding ElementName=HasFocus, Path=BorderBrush.(SolidColorBrush.Color)}"
                                                  Opacity="1"
                                                  BlurRadius="2" />
                            </Border.Effect>
                        </Border>

                        <ScrollViewer x:Name="ContentElement"
                                      BorderThickness="0"
                                      IsTabStop="False"
                                      Margin="{TemplateBinding Padding}"
                                      HorizontalAlignment="Stretch"
                                      VerticalAlignment="Center"
                                      Style="{StaticResource TextBoxScrollViewer}"
                                      Foreground="{TemplateBinding Foreground}" />

                        <Border x:Name="ValidationErrorElement"
                                Visibility="Collapsed"
                                BorderBrush="{DynamicResource Theme_ErrorBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ToolTipService.ToolTip>
                                <ToolTip x:Name="validationTooltip"
                                         DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                         Template="{StaticResource ValidationToolTipTemplate}"
                                         Placement="Right"
                                         PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                    <ToolTip.Triggers>
                                        <EventTrigger RoutedEvent="Canvas.Loaded">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                                   Storyboard.TargetProperty="IsHitTestVisible">
                                                        <DiscreteObjectKeyFrame KeyTime="0">
                                                            <DiscreteObjectKeyFrame.Value>
                                                                <system:Boolean>true</system:Boolean>
                                                            </DiscreteObjectKeyFrame.Value>
                                                        </DiscreteObjectKeyFrame>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </ToolTip.Triggers>
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <Grid Height="12"
                                  HorizontalAlignment="Right"
                                  Margin="1,-4,-4,0"
                                  VerticalAlignment="Top"
                                  Width="12"
                                  Background="Transparent">
                                <Path Fill="{DynamicResource Theme_ErrorBrush}"
                                      Margin="1,3,0,0"
                                      Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" />
                                <Path Fill="{DynamicResource Theme_ControlBackgroundBrush}"
                                      Margin="1,3,0,0"
                                      Data="M 0,0 L2,0 L 8,6 L8,8" />
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="TextBox"
           BasedOn="{StaticResource FlatTextBoxStyle}" />

    <!-- TextBoxScrollViewer -->
    <Style x:Key="TextBoxScrollViewer"
           TargetType="ScrollViewer">
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Center" />
        <Setter Property="VerticalScrollBarVisibility"
                Value="Visible" />
        <Setter Property="Padding"
                Value="0" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollViewer">
                    <Border BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="2">
                        <Grid Background="{TemplateBinding Background}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <ScrollContentPresenter Cursor="{TemplateBinding Cursor}"
                                                    Margin="{TemplateBinding Padding}"
                                                    x:Name="ScrollContentPresenter"
                                                    ContentTemplate="{TemplateBinding ContentTemplate}" />
                            <Rectangle Grid.Column="1"
                                       Grid.Row="1"
                                       Fill="#FFE9EEF4"
                                       Opacity="0" />
                            <ScrollBar x:Name="VerticalScrollBar"
                                       Width="18"
                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                       IsTabStop="False"
                                       Grid.Column="1"
                                       Maximum="{TemplateBinding ScrollableHeight}"
                                       Minimum="0"
                                       Value="{TemplateBinding VerticalOffset}"
                                       Orientation="Vertical"
                                       ViewportSize="{TemplateBinding ViewportHeight}" />
                            <ScrollBar Height="18"
                                       x:Name="HorizontalScrollBar"
                                       Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                       IsTabStop="False"
                                       Grid.Row="1"
                                       Maximum="{TemplateBinding ScrollableWidth}"
                                       Minimum="0"
                                       Value="{TemplateBinding HorizontalOffset}"
                                       Orientation="Horizontal"
                                       ViewportSize="{TemplateBinding ViewportWidth}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- CheckBox -->
    <Style x:Name="FlatCheckBox"
           TargetType="CheckBox">
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Center" />
        <Setter Property="Padding"
                Value="0,2,0,0" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="CheckBox">
                    <Grid Margin="{TemplateBinding Padding}"
                          VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="16" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.Resources>
                            <local:ColorInterpolator x:Key="DisabledBackgroundBuilder"
                                                     BaseColor="{TemplateBinding Background}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledBackgroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="00:00:00.2"
                                                          To="MouseOver" />
                                    <vsm:VisualTransition From="MouseOver"
                                                          GeneratedDuration="00:00:00.2" />
                                </vsm:VisualStateGroup.Transitions>
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="FadedBorder"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Bullet"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ThicknessAnimation Duration="00:00:00"
                                                            Storyboard.TargetName="Background"
                                                            Storyboard.TargetProperty="BorderThickness"
                                                            To="1.5,1.5,.5,.5" />
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Bullet"
                                                                       Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(TranslateTransform.X)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0.334" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Bullet"
                                                                       Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(TranslateTransform.Y)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0.334" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value=".55" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Bullet"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0.5" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ThicknessAnimation Duration="00:00:00"
                                                            Storyboard.TargetName="Background"
                                                            Storyboard.TargetProperty="BorderThickness"
                                                            To=".5,.5,.5,.5" />
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="CheckStates">
                                <vsm:VisualState x:Name="Checked">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="FadedBorder"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Collapsed" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Bullet"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unchecked">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Background"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <SolidColorBrush Color="Transparent" />
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Indeterminate">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="FadedBorder"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Collapsed" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="IndeterminateRectangle"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="HasFocus"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="ValidationStates">
                                <vsm:VisualState x:Name="Valid" />
                                <vsm:VisualState x:Name="InvalidUnfocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="InvalidFocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                       Storyboard.TargetProperty="IsOpen">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <system:Boolean>True</system:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Grid VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                              Width="16"
                              Height="16"
                              x:Name="Radio">
                            <Border CornerRadius="2"
                                    x:Name="Background"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    Background="{TemplateBinding Background}" />
                            <Rectangle Stroke="{x:Null}"
                                       StrokeThickness="0"
                                       x:Name="IndeterminateRectangle"
                                       Fill="{DynamicResource Theme_TextOnPrimaryBrush}"
                                       Visibility="Collapsed"
                                       Height="2"
                                       Margin="4,4,4,4"
                                       Grid.RowSpan="2"
                                       RadiusX="1"
                                       RadiusY="1" />

                            <Grid Width="12"
                                  Height="12"
                                  Visibility="Collapsed"
                                  x:Name="Bullet"
                                  Margin="0,0,0,0"
                                  RenderTransformOrigin="0.5,0.5">
                                <Grid.RenderTransform>
                                    <TransformGroup>
                                        <TranslateTransform />
                                    </TransformGroup>
                                </Grid.RenderTransform>
                                <Path Fill="{DynamicResource Theme_TextOnPrimaryBrush}"
                                      Data="M1.6045539,4.9657478 L3.9166667,6.7270508 L8.7999792,0.13644244 L10.335848,1.2280303 L4.1581869,9.0391064 L0.39386681,6.6038928 z"
                                      Stretch="Fill"
                                      StrokeLineJoin="Miter"
                                      StrokeMiterLimit="10" />
                            </Grid>
                            <Border x:Name="FadedBorder"
                                    CornerRadius="2"
                                    BorderBrush="{DynamicResource Theme_BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    Background="Transparent" />
                            <Border x:Name="HasFocus"
                                    CornerRadius="2"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    Background="Transparent"
                                    Visibility="Collapsed">
                                <Border.Effect>
                                    <DropShadowEffect ShadowDepth="0"
                                                      Color="{Binding ElementName=HasFocus, Path=BorderBrush.(SolidColorBrush.Color)}"
                                                      Opacity="1"
                                                      BlurRadius="2" />
                                </Border.Effect>
                            </Border>
                            <Border x:Name="ValidationErrorElement"
                                    Visibility="Collapsed"
                                    BorderBrush="{DynamicResource Theme_ErrorBrush}"
                                    BorderThickness="1"
                                    CornerRadius="7">
                                <ToolTipService.ToolTip>
                                    <ToolTip x:Name="validationTooltip"
                                             DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                             Template="{StaticResource ValidationToolTipTemplate}"
                                             Placement="Right"
                                             PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                        <ToolTip.Triggers>
                                            <EventTrigger RoutedEvent="Canvas.Loaded">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                                       Storyboard.TargetProperty="IsHitTestVisible">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <system:Boolean>true</system:Boolean>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </ToolTip.Triggers>
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <Grid Height="12"
                                      HorizontalAlignment="Right"
                                      Margin="1,-4,-4,0"
                                      VerticalAlignment="Top"
                                      Width="12"
                                      Background="Transparent">
                                    <Path Fill="{DynamicResource Theme_ErrorBrush}"
                                          Margin="1,3,0,0"
                                          Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" />
                                    <Path Fill="{DynamicResource Theme_BackgroundBrush}"
                                          Margin="1,3,0,0"
                                          Data="M 0,0 L2,0 L 8,6 L8,8" />
                                </Grid>
                            </Border>
                        </Grid>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          Margin="8,0,3,2"
                                          x:Name="contentPresenter"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          Grid.Column="1"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="CheckBox"
           BasedOn="{StaticResource FlatCheckBox}" />

    <!-- PasswordBox -->
    <Style x:Key="FlatPasswordBoxStyle"
           TargetType="PasswordBox">
        <Setter Property="Height"
                Value="32" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="CaretBrush"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="IsEnabled"
                Value="True" />
        <Setter Property="Padding"
                Value="9,0,9,2" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="PasswordBox">
                    <Grid x:Name="RootElement">
                        <Grid.Resources>
                            <local:ColorInterpolator x:Key="DisabledBorderBuilder"
                                                     BaseColor="{TemplateBinding BorderBrush}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <local:ColorInterpolator x:Key="DisabledForegroundBuilder"
                                                     BaseColor="{TemplateBinding Foreground}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>

                            <SolidColorBrush x:Key="DisabledBorderBrush"
                                             Color="{Binding Source={StaticResource DisabledBorderBuilder}, Path=ResultColor}" />
                            <SolidColorBrush x:Key="DisabledForegroundBrush"
                                             Color="{Binding Source={StaticResource DisabledForegroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="00:00:00.3" />
                                </vsm:VisualStateGroup.Transitions>
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="BorderColor"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderColor" Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBorderBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElementForeground" Storyboard.TargetProperty="(TextBlock.Foreground)">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="ReadOnly" />
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="HasFocus"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="ValidationStates">
                                <vsm:VisualState x:Name="Valid" />
                                <vsm:VisualState x:Name="InvalidUnfocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="InvalidFocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                       Storyboard.TargetProperty="IsOpen">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <system:Boolean>True</system:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Border x:Name="Background"
                                CornerRadius="4"
                                BorderBrush="{DynamicResource Theme_BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}" />
                        <Border x:Name="BorderColor"
                                CornerRadius="4"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="Transparent"
                                Opacity="0" />

                        <Border x:Name="ContentElement"
                                BorderThickness="0"
                                Margin="{TemplateBinding Padding}"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch" />
                        <Border x:Name="HasFocus"
                                CornerRadius="4"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="Transparent"
                                Visibility="Collapsed">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="0"
                                                  Color="{Binding ElementName=HasFocus, Path=BorderBrush.(SolidColorBrush.Color)}"
                                                  Opacity="1"
                                                  BlurRadius="2" />
                            </Border.Effect>
                        </Border>
                        <Border x:Name="ValidationErrorElement"
                                Visibility="Collapsed"
                                BorderBrush="{DynamicResource Theme_ErrorBrush}"
                                BorderThickness="1"
                                CornerRadius="7">
                            <ToolTipService.ToolTip>
                                <ToolTip x:Name="validationTooltip"
                                         DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                         Template="{StaticResource ValidationToolTipTemplate}"
                                         Placement="Right"
                                         PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                    <ToolTip.Triggers>
                                        <EventTrigger RoutedEvent="Canvas.Loaded">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                                   Storyboard.TargetProperty="IsHitTestVisible">
                                                        <DiscreteObjectKeyFrame KeyTime="0">
                                                            <DiscreteObjectKeyFrame.Value>
                                                                <system:Boolean>true</system:Boolean>
                                                            </DiscreteObjectKeyFrame.Value>
                                                        </DiscreteObjectKeyFrame>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </ToolTip.Triggers>
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <Grid Height="12"
                                  HorizontalAlignment="Right"
                                  Margin="1,-4,-4,0"
                                  VerticalAlignment="Top"
                                  Width="12"
                                  Background="Transparent">
                                <Path Fill="{DynamicResource Theme_ErrorBrush}"
                                      Margin="1,3,0,0"
                                      Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" />
                                <Path Fill="{DynamicResource Theme_BackgroundBrush}"
                                      Margin="1,3,0,0"
                                      Data="M 0,0 L2,0 L 8,6 L8,8" />
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="PasswordBox"
           BasedOn="{StaticResource FlatPasswordBoxStyle}" />

    <!-- RadioButton -->
    <Style x:Key="FlatRadioButtonStyle"
           TargetType="RadioButton">
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Center" />
        <Setter Property="Padding"
                Value="0,2,0,0" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="RadioButton">
                    <Grid Margin="{TemplateBinding Padding}"
                          VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="16" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.Resources>
                            <local:ColorInterpolator x:Key="DisabledColorBuilder"
                                                     BaseColor="{TemplateBinding BorderBrush}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledColorBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="00:00:00.2"
                                                          To="MouseOver" />
                                    <vsm:VisualTransition From="MouseOver"
                                                          GeneratedDuration="00:00:00.2" />
                                </vsm:VisualStateGroup.Transitions>
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Hover"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ThicknessAnimation Duration="00:00:00"
                                                            Storyboard.TargetName="Hover"
                                                            Storyboard.TargetProperty="BorderThickness"
                                                            To="6" />
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Hover"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value=".55" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BulletBorder"
                                                                       Storyboard.TargetProperty="(UIElement.BorderBrush)">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="(UIElement.BorderBrush)">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="CheckStates">
                                <vsm:VisualState x:Name="Checked">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="BulletBorder"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unchecked" />
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="HasFocus"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="ValidationStates">
                                <vsm:VisualState x:Name="Valid" />
                                <vsm:VisualState x:Name="InvalidUnfocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="InvalidFocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                       Storyboard.TargetProperty="IsOpen">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <system:Boolean>True</system:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Grid x:Name="Radio"
                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                              Width="16"
                              Height="16">
                            <Border x:Name="HasFocus"
                                    CornerRadius="8"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="1"
                                    Background="Transparent"
                                    Visibility="Collapsed">
                                <Border.Effect>
                                    <DropShadowEffect ShadowDepth="0"
                                                      Color="{Binding ElementName=HasFocus, Path=BorderBrush.(SolidColorBrush.Color)}"
                                                      Opacity="1"
                                                      BlurRadius="2" />
                                </Border.Effect>
                            </Border>
                            <Border CornerRadius="8"
                                    x:Name="Background"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="1"
                                    Background="{TemplateBinding Background}" />

                            <Grid x:Name="Bullet"
                                  Width="16"
                                  Height="16"
                                  RenderTransformOrigin="0.5,0.5">
                                <Border x:Name="Hover"
                                        Background="Transparent"
                                        Visibility="Collapsed"
                                        Opacity=".7"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="3"
                                        CornerRadius="8" />
                                <Border x:Name="BulletBorder"
                                        Background="Transparent"
                                        Visibility="Collapsed"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="5"
                                        CornerRadius="8" />
                            </Grid>
                            <Border x:Name="ValidationErrorElement"
                                    Visibility="Collapsed"
                                    BorderBrush="{DynamicResource Theme_ErrorBrush}"
                                    BorderThickness="1"
                                    CornerRadius="7">
                                <ToolTipService.ToolTip>
                                    <ToolTip x:Name="validationTooltip"
                                             DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                             Template="{StaticResource ValidationToolTipTemplate}"
                                             Placement="Right"
                                             PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                        <ToolTip.Triggers>
                                            <EventTrigger RoutedEvent="Canvas.Loaded">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                                       Storyboard.TargetProperty="IsHitTestVisible">
                                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                                <DiscreteObjectKeyFrame.Value>
                                                                    <system:Boolean>true</system:Boolean>
                                                                </DiscreteObjectKeyFrame.Value>
                                                            </DiscreteObjectKeyFrame>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </ToolTip.Triggers>
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                                <Grid Height="12"
                                      HorizontalAlignment="Right"
                                      Margin="1,-4,-4,0"
                                      VerticalAlignment="Top"
                                      Width="12"
                                      Background="Transparent">
                                    <Path Fill="{DynamicResource Theme_ErrorBrush}"
                                          Margin="1,3,0,0"
                                          Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" />
                                    <Path Fill="{DynamicResource Theme_BackgroundBrush}"
                                          Margin="1,3,0,0"
                                          Data="M 0,0 L2,0 L 8,6 L8,8" />
                                </Grid>
                            </Border>
                        </Grid>
                        <ContentPresenter x:Name="contentPresenter"
                                          Margin="8,0,0,2"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          Grid.Column="1"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="RadioButton"
           BasedOn="{StaticResource FlatRadioButtonStyle}" />

    <!-- ListBoxItem -->
    <Style x:Name="FlatListBoxItemStyle"
           TargetType="ListBoxItem">
        <Setter Property="Padding"
                Value="5" />
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Top" />
        <Setter Property="Background"
                Value="Transparent" />
        <Setter Property="Foreground"
        Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="TabNavigation"
                Value="Local" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Grid Background="{TemplateBinding Background}"
                          Margin="2,1">
                        <Grid.Resources>
                            <local:BrushBuilder x:Key="HoverBrushBuilder"
                                                BasedOn="{Binding Background, ElementName=SelectedBackground}"
                                                BrightnessRatio="{DynamicResource Theme_HoverBrightnessRatio}"/>
                            <SolidColorBrush x:Key="SelectedBrush"
                                             Color="{DynamicResource Theme_TextOnPrimaryColor}" />

                            <local:ColorInterpolator x:Key="DisabledBackgroundBuilder"
                                                     BaseColor="{Binding Background, ElementName=SelectedBackground}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledBackgroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectedBackground" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{Binding Source={StaticResource HoverBrushBuilder}, Path=Brush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="Hover"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value=".35" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value=".55" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectedBackground" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="SelectionStates">
                                <vsm:VisualState x:Name="Unselected" />
                                <vsm:VisualState x:Name="Selected">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="SelectedBackground"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="SelectedTextControl"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{StaticResource SelectedBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0"
                                                                       Storyboard.TargetName="FocusVisualElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Border x:Name="SelectedBackground"
                                Background="{DynamicResource Theme_PrimaryBrush}"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                CornerRadius="4"
                                Opacity="0" />
                        <Border x:Name="Hover"
                                Background="#bababa"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                CornerRadius="4"
                                Opacity="0" />
                        <ContentControl x:Name="SelectedTextControl" Foreground="{TemplateBinding Foreground}">
                            <ContentPresenter HorizontalAlignment="Left"
                                              Margin="{TemplateBinding Padding}"
                                              x:Name="contentPresenter"
                                              Content="{TemplateBinding Content}"
                                              ContentTemplate="{TemplateBinding ContentTemplate}" />
                        </ContentControl>
                        <Border x:Name="FocusVisualElement"
                                Visibility="Collapsed"
                                BorderBrush="{DynamicResource Theme_PrimaryBrush}"
                                BorderThickness="0.5"
                                CornerRadius="4" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="ListBoxItem"
           BasedOn="{StaticResource FlatListBoxItemStyle}" />

    <!-- ListBox -->
    <Style x:Name="FlatListBoxStyle"
           TargetType="ListBox">
        <Setter Property="Padding"
                Value="1" />
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Top" />
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="TabNavigation"
                Value="Once" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_BorderBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBox">
                    <Grid>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="ValidationStates">
                                <vsm:VisualState x:Name="Valid" />
                                <vsm:VisualState x:Name="InvalidUnfocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="InvalidFocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                       Storyboard.TargetProperty="IsOpen">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <system:Boolean>True</system:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Border x:Name="Background"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ScrollViewer x:Name="ScrollViewer"
                                          Background="Transparent"
                                          Foreground="{TemplateBinding Foreground}"
                                          BorderBrush="{TemplateBinding BorderBrush}"
                                          BorderThickness="0"
                                          Padding="{TemplateBinding Padding}">
                                <ItemsPresenter />
                            </ScrollViewer>
                        </Border>
                        <Border x:Name="ValidationErrorElement"
                                Visibility="Collapsed"
                                BorderBrush="{DynamicResource Theme_ErrorBrush}"
                                BorderThickness="1"
                                CornerRadius="7">
                            <ToolTipService.ToolTip>
                                <ToolTip x:Name="validationTooltip"
                                         DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                         Template="{StaticResource ValidationToolTipTemplate}"
                                         Placement="Right"
                                         PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                    <ToolTip.Triggers>
                                        <EventTrigger RoutedEvent="Canvas.Loaded">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                                   Storyboard.TargetProperty="IsHitTestVisible">
                                                        <DiscreteObjectKeyFrame KeyTime="0">
                                                            <DiscreteObjectKeyFrame.Value>
                                                                <system:Boolean>true</system:Boolean>
                                                            </DiscreteObjectKeyFrame.Value>
                                                        </DiscreteObjectKeyFrame>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </ToolTip.Triggers>
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <Grid Height="12"
                                    HorizontalAlignment="Right"
                                  Margin="1,-4,-4,0"
                                  VerticalAlignment="Top"
                                  Width="12"
                                  Background="Transparent">
                                <Path         
                                      Fill="{DynamicResource Theme_ErrorBrush}"
                                      Margin="1,3,0,0"
                                      Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" />
                                <Path Fill="{DynamicResource Theme_BackgroundBrush}"
                                      Margin="1,3,0,0"
                                      Data="M 0,0 L2,0 L 8,6 L8,8" />
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="ListBox"
           BasedOn="{StaticResource FlatListBoxStyle}" />

    <!-- ScrollBar -->
    <Style TargetType="ScrollBar">
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="Value"
                Value="0" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_BorderBrush}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollBar">
                    <Grid x:Name="Root"
                          Width="{TemplateBinding Width}"
                          Height="{TemplateBinding Height}">
                        <Grid.Resources>
                            <ControlTemplate x:Key="RepeatButtonTemplate"
                                             TargetType="RepeatButton">
                                <Grid x:Name="Root"
                                      Background="Transparent">
                                    <vsm:VisualStateManager.VisualStateGroups>
                                        <vsm:VisualStateGroup x:Name="CommonStates">
                                            <vsm:VisualState x:Name="Normal" />
                                        </vsm:VisualStateGroup>
                                    </vsm:VisualStateManager.VisualStateGroups>
                                </Grid>
                            </ControlTemplate>
                            <ControlTemplate x:Key="HorizontalIncrementTemplate"
                                             TargetType="RepeatButton">
                                <Grid x:Name="Root">
                                    <vsm:VisualStateManager.VisualStateGroups>
                                        <vsm:VisualStateGroup x:Name="CommonStates">
                                            <vsm:VisualState x:Name="Normal" />
                                            <vsm:VisualState x:Name="MouseOver" />
                                            <vsm:VisualState x:Name="Pressed" />
                                            <vsm:VisualState x:Name="Disabled" />
                                        </vsm:VisualStateGroup>
                                    </vsm:VisualStateManager.VisualStateGroups>
                                    <Rectangle x:Name="Background"
                                               Opacity="0"
                                               RadiusX="2"
                                               RadiusY="2"
                                               Fill="{TemplateBinding Background}"
                                               StrokeThickness="1"
                                               Stroke="{x:Null}" />
                                    <Path Height="8"
                                          Width="4"
                                          Stretch="Uniform"
                                          Data="F1 M 511.047,352.682L 511.047,342.252L 517.145,347.467L 511.047,352.682 Z "
                                          Fill="{TemplateBinding Foreground}"
                                          Stroke="{TemplateBinding BorderBrush}" />
                                </Grid>
                            </ControlTemplate>
                            <ControlTemplate x:Key="HorizontalDecrementTemplate"
                                             TargetType="RepeatButton">
                                <Grid x:Name="Root">
                                    <vsm:VisualStateManager.VisualStateGroups>
                                        <vsm:VisualStateGroup x:Name="CommonStates">
                                            <vsm:VisualState x:Name="Normal" />
                                            <vsm:VisualState x:Name="MouseOver" />
                                            <vsm:VisualState x:Name="Pressed" />
                                            <vsm:VisualState x:Name="Disabled" />
                                        </vsm:VisualStateGroup>
                                    </vsm:VisualStateManager.VisualStateGroups>
                                    <Rectangle x:Name="Background"
                                               Opacity="0"
                                               RadiusX="2"
                                               RadiusY="2"
                                               Fill="{TemplateBinding Background}"
                                               StrokeThickness="1"
                                               Stroke="{x:Null}" />
                                    <Path Height="8"
                                          Width="4"
                                          Stretch="Uniform"
                                          Data="F1 M 110.692,342.252L 110.692,352.682L 104.594,347.467L 110.692,342.252 Z "
                                          Fill="{TemplateBinding Foreground}"
                                          Stroke="{TemplateBinding BorderBrush}" />
                                </Grid>
                            </ControlTemplate>
                            <ControlTemplate x:Key="VerticalIncrementTemplate"
                                             TargetType="RepeatButton">
                                <Grid x:Name="Root">
                                    <vsm:VisualStateManager.VisualStateGroups>
                                        <vsm:VisualStateGroup x:Name="CommonStates">
                                            <vsm:VisualState x:Name="Normal" />
                                            <vsm:VisualState x:Name="MouseOver" />
                                            <vsm:VisualState x:Name="Pressed" />
                                            <vsm:VisualState x:Name="Disabled" />
                                        </vsm:VisualStateGroup>
                                    </vsm:VisualStateManager.VisualStateGroups>
                                    <Rectangle x:Name="Background"
                                               Opacity="0"
                                               RadiusX="2"
                                               RadiusY="2"
                                               Fill="{TemplateBinding Background}"
                                               StrokeThickness="1"
                                               Stroke="{x:Null}" />
                                    <Path Height="4"
                                          Width="8"
                                          Stretch="Uniform"
                                          Data="F1 M 531.107,321.943L 541.537,321.943L 536.322,328.042L 531.107,321.943 Z "
                                          Fill="{TemplateBinding Foreground}"
                                          Stroke="{TemplateBinding BorderBrush}" />
                                </Grid>
                            </ControlTemplate>
                            <ControlTemplate x:Key="VerticalDecrementTemplate"
                                             TargetType="RepeatButton">
                                <Grid x:Name="Root">
                                    <vsm:VisualStateManager.VisualStateGroups>
                                        <vsm:VisualStateGroup x:Name="CommonStates">
                                            <vsm:VisualState x:Name="Normal" />
                                            <vsm:VisualState x:Name="MouseOver" />
                                            <vsm:VisualState x:Name="Pressed" />
                                            <vsm:VisualState x:Name="Disabled" />
                                        </vsm:VisualStateGroup>
                                    </vsm:VisualStateManager.VisualStateGroups>
                                    <Rectangle x:Name="Background"
                                               Opacity="0"
                                               RadiusX="2"
                                               RadiusY="2"
                                               Fill="{TemplateBinding Background}"
                                               StrokeThickness="1"
                                               Stroke="{x:Null}" />
                                    <Path Height="4"
                                          Width="8"
                                          Stretch="Uniform"
                                          Data="F1 M 541.537,173.589L 531.107,173.589L 536.322,167.49L 541.537,173.589 Z "
                                          Fill="{TemplateBinding Foreground}"
                                          Stroke="{TemplateBinding BorderBrush}" />
                                </Grid>
                            </ControlTemplate>
                            <ControlTemplate x:Key="VerticalThumbTemplate"
                                             TargetType="Thumb">
                                <Grid>
                                    <vsm:VisualStateManager.VisualStateGroups>
                                        <vsm:VisualStateGroup x:Name="CommonStates">
                                            <vsm:VisualStateGroup.Transitions>
                                                <vsm:VisualTransition GeneratedDuration="00:00:00.2000000" />
                                            </vsm:VisualStateGroup.Transitions>
                                            <vsm:VisualState x:Name="Normal" />
                                            <vsm:VisualState x:Name="MouseOver" />
                                            <vsm:VisualState x:Name="Pressed" />
                                            <vsm:VisualState x:Name="Disabled" />
                                        </vsm:VisualStateGroup>
                                    </vsm:VisualStateManager.VisualStateGroups>
                                    <Grid Margin="1,0,1,0"
                                          x:Name="ThumbVisual">
                                        <Border x:Name="Background"
                                                BorderThickness="0"
                                                Background="{TemplateBinding Background}"
                                                CornerRadius="3"
                                                Width="6" />
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                            <ControlTemplate x:Key="HorizontalThumbTemplate"
                                             TargetType="Thumb">
                                <Grid>
                                    <vsm:VisualStateManager.VisualStateGroups>
                                        <vsm:VisualStateGroup x:Name="CommonStates">
                                            <vsm:VisualStateGroup.Transitions>
                                                <vsm:VisualTransition GeneratedDuration="00:00:00.2000000" />
                                            </vsm:VisualStateGroup.Transitions>
                                            <vsm:VisualState x:Name="Normal" />
                                            <vsm:VisualState x:Name="MouseOver" />
                                            <vsm:VisualState x:Name="Pressed" />
                                            <vsm:VisualState x:Name="Disabled" />
                                        </vsm:VisualStateGroup>
                                    </vsm:VisualStateManager.VisualStateGroups>
                                    <Grid Margin="0,1,0,1"
                                          x:Name="ThumbVisual">
                                        <Border x:Name="Background"
                                                BorderThickness="0"
                                                Background="{TemplateBinding Background}"
                                                CornerRadius="3"
                                                Height="6" />
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="00:00:00.2" />
                                </vsm:VisualStateGroup.Transitions>
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver" />
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="Root"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0.5" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Grid x:Name="HorizontalRoot">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <RepeatButton IsTabStop="False"
                                          Template="{StaticResource HorizontalDecrementTemplate}"
                                          Margin="1"
                                          x:Name="HorizontalSmallDecrease"
                                          Width="16"
                                          Interval="50"
                                          Background="{DynamicResource Theme_ControlBackgroundBrush}"
                                          BorderBrush="{x:Null}"
                                          Foreground="{TemplateBinding Foreground}" />
                            <RepeatButton IsTabStop="False"
                                          Template="{StaticResource RepeatButtonTemplate}"
                                          x:Name="HorizontalLargeDecrease"
                                          Grid.Column="1"
                                          Interval="50" />
                            <Thumb Template="{StaticResource HorizontalThumbTemplate}"
                                   MinWidth="10"
                                   x:Name="HorizontalThumb"
                                   Grid.Column="2"
                                   BorderBrush="Transparent"
                                   Margin="0,0,0,0"
                                   Background="{TemplateBinding Foreground}" />
                            <RepeatButton IsTabStop="False"
                                          Template="{StaticResource RepeatButtonTemplate}"
                                          x:Name="HorizontalLargeIncrease"
                                          Grid.Column="3"
                                          Interval="50" />
                            <RepeatButton IsTabStop="False"
                                          Template="{StaticResource HorizontalIncrementTemplate}"
                                          Margin="1"
                                          x:Name="HorizontalSmallIncrease"
                                          Width="16"
                                          Grid.Column="4"
                                          Interval="50"
                                          Background="{DynamicResource Theme_ControlBackgroundBrush}"
                                          BorderBrush="{x:Null}"
                                          Foreground="{TemplateBinding Foreground}" />
                        </Grid>
                        <Grid x:Name="VerticalRoot"
                              Visibility="Collapsed">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <RepeatButton IsTabStop="False"
                                          Template="{StaticResource VerticalDecrementTemplate}"
                                          Height="16"
                                          Margin="1"
                                          x:Name="VerticalSmallDecrease"
                                          Interval="50"
                                          BorderBrush="{x:Null}"
                                          Foreground="{TemplateBinding Foreground}"
                                          Background="Transparent"
                                          IsEnabled="True"
                                          BorderThickness="0,0,0,0" />
                            <RepeatButton IsTabStop="False"
                                          Template="{StaticResource RepeatButtonTemplate}"
                                          x:Name="VerticalLargeDecrease"
                                          Grid.Row="1"
                                          Interval="50" />
                            <Thumb Template="{StaticResource VerticalThumbTemplate}"
                                   MinHeight="10"
                                   x:Name="VerticalThumb"
                                   Grid.Row="2"
                                   Margin="0,0,0.5,0"
                                   BorderBrush="Transparent"
                                   Background="{TemplateBinding Foreground}" />
                            <RepeatButton IsTabStop="False"
                                          Template="{StaticResource RepeatButtonTemplate}"
                                          x:Name="VerticalLargeIncrease"
                                          Grid.Row="3"
                                          Interval="50" />
                            <RepeatButton IsTabStop="False"
                                          Template="{StaticResource VerticalIncrementTemplate}"
                                          Height="16"
                                          Margin="1"
                                          x:Name="VerticalSmallIncrease"
                                          Grid.Row="4"
                                          Interval="50"
                                          BorderBrush="{x:Null}"
                                          Foreground="{TemplateBinding Foreground}"
                                          Background="{DynamicResource Theme_ControlBackgroundBrush}" />
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ScrollViewer -->
    <Style TargetType="ScrollViewer">
        <Setter Property="Padding"
                Value="1" />
        <Setter Property="VerticalScrollBarVisibility"
                Value="Auto" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollViewer">
                    <Border x:Name="Root"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Background="{TemplateBinding Background}"
                            CornerRadius="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ScrollContentPresenter Cursor="{TemplateBinding Cursor}"
                                                    Margin="{TemplateBinding Padding}"
                                                    x:Name="ScrollContentPresenter"
                                                    ContentTemplate="{TemplateBinding ContentTemplate}" />
                            <ScrollBar x:Name="VerticalScrollBar"
                                       Width="16"
                                       HorizontalAlignment="Right"
                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                       IsTabStop="False"
                                       Grid.Column="1"
                                       Maximum="{TemplateBinding ScrollableHeight}"
                                       Minimum="0"
                                       Value="{TemplateBinding VerticalOffset}"
                                       Orientation="Vertical"
                                       ViewportSize="{TemplateBinding ViewportHeight}" />
                            <ScrollBar x:Name="HorizontalScrollBar"
                                       Height="16"
                                       VerticalAlignment="Bottom"
                                       Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                       IsTabStop="False"
                                       Grid.Row="1"
                                       Maximum="{TemplateBinding ScrollableWidth}"
                                       Minimum="0"
                                       Value="{TemplateBinding HorizontalOffset}"
                                       Orientation="Horizontal"
                                       ViewportSize="{TemplateBinding ViewportWidth}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Slider ThumbStyle -->
    <Style x:Key="SliderThumbStyle"
           TargetType="Thumb">
        <Setter Property="Background"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="BorderThickness"
                Value="2" />
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Thumb">
                    <Grid>
                        <Grid.Resources>
                            <local:ColorInterpolator x:Key="DisabledBackgroundBuilder"
                                                     BaseColor="{TemplateBinding BorderBrush}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledBackgroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver" />
                                <vsm:VisualState x:Name="Pressed" />
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ThumbVisual"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0"
                                                                  Value="0.4" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="FocusBorder"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Grid x:Name="ThumbVisual">
                            <Border x:Name="Background"
                                    CornerRadius="8"
                                    Width="{TemplateBinding Width}"
                                    Height="{TemplateBinding Height}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    Background="{TemplateBinding Background}" />
                            <Border x:Name="FocusBorder"
                                    CornerRadius="8"
                                    Width="{TemplateBinding Width}"
                                    Height="{TemplateBinding Height}"
                                    BorderThickness="1"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    Background="Transparent"
                                    Visibility="Collapsed">
                                <Border.Effect>
                                    <DropShadowEffect ShadowDepth="0"
                                                      Color="{Binding ElementName=FocusBorder, Path=BorderBrush.(SolidColorBrush.Color)}"
                                                      Opacity="1"
                                                      BlurRadius="2" />
                                </Border.Effect>
                            </Border>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Slider -->
    <Style x:Name="FlatSliderStyle"
           TargetType="Slider">
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="Maximum"
                Value="10" />
        <Setter Property="Minimum"
                Value="0" />
        <Setter Property="Value"
                Value="0" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="Orientation"
                Value="Horizontal" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Slider">
                    <Grid x:Name="Root">
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver" />
                                <vsm:VisualState x:Name="Pressed" />
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <!--<ColorAnimationUsingKeyFrames Duration="00:00:00.001"
                                              Storyboard.TargetName="Background"
                                              Storyboard.TargetProperty="(UIElement.BorderBrush).(SolidColorBrush.Color)">
                                            <SplineColorKeyFrame KeyTime="0"
                                         Value="{DynamicResource Theme_BorderColor}" />
                                        </ColorAnimationUsingKeyFrames>-->
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="TrackValue"
                                               Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0"
                                          Value="0.4" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="VerticalTrackValue"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0" Value="0.4" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Grid.Resources>
                            <ControlTemplate x:Key="RepeatButtonTemplate">
                                <Grid x:Name="Root"
                                      Opacity="0"
                                      Background="Transparent" />
                            </ControlTemplate>
                        </Grid.Resources>
                        <Grid x:Name="HorizontalTemplate"
                              Visibility="Collapsed">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Border x:Name="TrackRectangle"
                                    Height="2"
                                    Margin="8,0,8,0"
                                    Grid.ColumnSpan="3"
                                    CornerRadius="1"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{DynamicResource Theme_BorderBrush}"
                                    BorderThickness="1" />
                            <Border x:Name="HorizontalTrackRectangleDisabledOverlay"
                                    Height="2"
                                    Margin="5,0,5,0"
                                    Opacity=".55"
                                    Visibility="Collapsed"
                                    Grid.ColumnSpan="3"
                                    CornerRadius="1"
                                    Background="White" />
                            <Border x:Name="TrackValue"
                                    Height="2"
                                    Margin="8,0,8,0"
                                    Grid.ColumnSpan="2"
                                    CornerRadius="1"
                                    Background="{TemplateBinding BorderBrush}"/>
                            <RepeatButton x:Name="HorizontalTrackLargeChangeDecreaseRepeatButton"
                                          IsTabStop="False"
                                          Template="{StaticResource RepeatButtonTemplate}" />
                            <Thumb x:Name="HorizontalThumb"
                                   Width="16"
                                   Height="16"
                                   IsTabStop="True"
                                   Grid.Column="1"
                                   Style="{StaticResource SliderThumbStyle}"
                                   Background="{TemplateBinding Background}"
                                   BorderBrush="{TemplateBinding BorderBrush}" />
                            <Border x:Name="ThumbFocusHighlight"
                                    Width="16"
                                    Height="16"
                                    Grid.Column="1"
                                    CornerRadius="8" />
                            <RepeatButton x:Name="HorizontalTrackLargeChangeIncreaseRepeatButton"
                                          IsTabStop="False"
                                          Template="{StaticResource RepeatButtonTemplate}"
                                          Grid.Column="2" />
                        </Grid>
                        <Grid x:Name="VerticalTemplate"
                              Visibility="Collapsed">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Border x:Name="VerticalTrackRectangle"
                                    Width="2"
                                    Margin="0,8,0,8"
                                    Grid.RowSpan="3"
                                    CornerRadius="1"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{DynamicResource Theme_BorderBrush}"
                                    BorderThickness="1" />
                            <Border x:Name="VerticalTrackRectangleDisabledOverlay"
                                    Width="2"
                                    Margin="0,5,0,5"
                                    Opacity=".55"
                                    Visibility="Collapsed"
                                    Grid.RowSpan="3"
                                    CornerRadius="1"
                                    Background="White" />
                            <Border x:Name="VerticalTrackValue"
                                    Width="2"
                                    Margin="0,8,0,8"
                                    Grid.RowSpan="2"
                                    Grid.Row="1"
                                    CornerRadius="1"
                                    Background="{TemplateBinding BorderBrush}"/>
                            <RepeatButton x:Name="VerticalTrackLargeChangeDecreaseRepeatButton"
                                          IsTabStop="False"
                                          Template="{StaticResource RepeatButtonTemplate}"
                                          Grid.Row="2" />
                            <Thumb x:Name="VerticalThumb"
                                   Height="16"
                                   Width="16"
                                   IsTabStop="True"
                                   Grid.Row="1"
                                   Style="{StaticResource SliderThumbStyle}"
                                   Background="{TemplateBinding Background}"
                                   BorderBrush="{TemplateBinding BorderBrush}" />
                            <RepeatButton x:Name="VerticalTrackLargeChangeIncreaseRepeatButton"
                                          IsTabStop="False"
                                          Template="{StaticResource RepeatButtonTemplate}" />
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="Slider"
           BasedOn="{StaticResource FlatSliderStyle}" />

    <!-- TreeViewItem -->
    <Style x:Name="FlatTreeViewItemStyle"
           TargetType="TreeViewItem">
        <Setter Property="Padding"
                Value="3" />
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Center" />
        <Setter Property="Background"
                Value="Transparent" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="Cursor"
                Value="Arrow" />
        <Setter Property="IsTabStop"
                Value="True" />
        <Setter Property="TabNavigation"
                Value="Once" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TreeViewItem">
                    <Grid Background="{x:Null}"
                          x:Name="Root">
                        <Grid.Resources>
                            <SolidColorBrush x:Key="SelectedBrush"
                                             Color="{DynamicResource Theme_TextOnPrimaryColor}" />

                            <local:ColorInterpolator x:Key="DisabledBackgroundBuilder"
                                                     BaseColor="{DynamicResource Theme_PrimaryBrush}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledBackgroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Background" Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Header"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0.55" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="SelectionStates">
                                <vsm:VisualState x:Name="Unselected" />
                                <vsm:VisualState x:Name="Selected">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="grid"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Header"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{StaticResource SelectedBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="SelectedInactive">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="grid"
                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0.8" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="Header"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{StaticResource SelectedBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="HasItemsStates">
                                <vsm:VisualState x:Name="HasItems" />
                                <vsm:VisualState x:Name="NoItems">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0"
                                                                       Storyboard.TargetName="ExpanderButton"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Collapsed" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="ExpansionStates">
                                <vsm:VisualState x:Name="Collapsed" />
                                <vsm:VisualState x:Name="Expanded">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0"
                                                                       Storyboard.TargetName="ItemsHost"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="15" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="1"
                              Opacity="0"
                              x:Name="grid">
                            <Border x:Name="Background"
                                    CornerRadius="12"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="1"
                                    Background="{DynamicResource Theme_PrimaryBrush}" />
                        </Grid>
                        <ToggleButton HorizontalAlignment="Stretch"
                                      x:Name="ExpanderButton"
                                      VerticalAlignment="Stretch"
                                      IsTabStop="False"
                                      TabNavigation="Once">
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Grid x:Name="Root"
                                          Background="Transparent">
                                        <vsm:VisualStateManager.VisualStateGroups>
                                            <vsm:VisualStateGroup x:Name="CommonStates">
                                                <vsm:VisualState x:Name="Normal" />
                                                <vsm:VisualState x:Name="MouseOver">
                                                    <Storyboard>
                                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                                       Storyboard.TargetName="Border"
                                                                                       Storyboard.TargetProperty="(Shape.StrokeThickness)">
                                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                                  Value="1.25" />
                                                        </DoubleAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </vsm:VisualState>
                                                <vsm:VisualState x:Name="Disabled">
                                                    <Storyboard>
                                                        <DoubleAnimation Duration="0"
                                                                         Storyboard.TargetName="Root"
                                                                         Storyboard.TargetProperty="Opacity"
                                                                         To=".7" />
                                                    </Storyboard>
                                                </vsm:VisualState>
                                            </vsm:VisualStateGroup>
                                            <vsm:VisualStateGroup x:Name="CheckStates">
                                                <vsm:VisualState x:Name="Unchecked" />
                                                <vsm:VisualState x:Name="Checked">
                                                    <Storyboard>
                                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                                       Storyboard.TargetName="grid"
                                                                                       Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)">
                                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                                  Value="45" />
                                                        </DoubleAnimationUsingKeyFrames>
                                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                                       Storyboard.TargetName="Arrow"
                                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                                  Value="1" />
                                                        </DoubleAnimationUsingKeyFrames>
                                                        <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                                       Storyboard.TargetName="Border"
                                                                                       Storyboard.TargetProperty="(UIElement.Opacity)">
                                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                                  Value="0" />
                                                        </DoubleAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </vsm:VisualState>
                                            </vsm:VisualStateGroup>
                                        </vsm:VisualStateManager.VisualStateGroups>
                                        <Grid HorizontalAlignment="Right"
                                              Margin="2 2 5 2">
                                            <Grid x:Name="grid"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  RenderTransformOrigin=".25,.8"
                                                  Height="10"
                                                  Width="5">
                                                <Grid.RenderTransform>
                                                    <TransformGroup>
                                                        <RotateTransform />
                                                    </TransformGroup>
                                                </Grid.RenderTransform>
                                                <Path x:Name="Arrow"
                                                      Stroke="{x:Null}"
                                                      StrokeLineJoin="Miter"
                                                      StrokeThickness=".75"
                                                      Data="M 0,0 L 0,10 L 5,5 Z"
                                                      Fill="{DynamicResource Theme_TextBrush}"
                                                      Opacity="0" />
                                                <Path x:Name="Border"
                                                      Stroke="{DynamicResource Theme_TextBrush}"
                                                      StrokeLineJoin="Miter"
                                                      StrokeThickness=".75"
                                                      Data="M 0,0 L 0,10 L 5,5 Z"
                                                      Fill="{x:Null}" />
                                            </Grid>
                                        </Grid>
                                    </Grid>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>
                        <Button x:Name="Header"
                                Height="Auto"
                                Cursor="{TemplateBinding Cursor}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                Background="{TemplateBinding Background}"
                                Foreground="{TemplateBinding Foreground}"
                                IsTabStop="False"
                                TabNavigation="Once"
                                Grid.Column="1"
                                ClickMode="Hover"
                                Content="{TemplateBinding Header}"
                                ContentTemplate="{TemplateBinding HeaderTemplate}"
                                Padding="8,3,8,3"
                                UseLayoutRounding="False">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Grid Background="{TemplateBinding Background}">
                                        <vsm:VisualStateManager.VisualStateGroups>
                                            <vsm:VisualStateGroup x:Name="CommonStates">
                                                <vsm:VisualState x:Name="Normal" />
                                                <vsm:VisualState x:Name="Disabled">
                                                    <Storyboard>
                                                        <DoubleAnimation Duration="0"
                                                                         Storyboard.TargetName="content"
                                                                         Storyboard.TargetProperty="Opacity"
                                                                         To=".55" />
                                                    </Storyboard>
                                                </vsm:VisualState>
                                            </vsm:VisualStateGroup>
                                        </vsm:VisualStateManager.VisualStateGroups>
                                        <ContentPresenter Cursor="{TemplateBinding Cursor}"
                                                          HorizontalAlignment="Left"
                                                          Margin="{TemplateBinding Padding}"
                                                          x:Name="content"
                                                          Content="{TemplateBinding Content}"
                                                          ContentTemplate="{TemplateBinding ContentTemplate}" />
                                    </Grid>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        <ItemsPresenter x:Name="ItemsHost"
                                        Visibility="Collapsed"
                                        Grid.Column="1"
                                        Grid.ColumnSpan="2"
                                        Grid.Row="1" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="TreeViewItem"
           BasedOn="{StaticResource FlatTreeViewItemStyle}" />

    <!-- TreeView -->
    <Style x:Name="FlatTreeViewStyle"
           TargetType="TreeView">
        <Setter Property="Background"
                Value="Transparent" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Top" />
        <Setter Property="Cursor"
                Value="Arrow" />
        <Setter Property="Padding"
                Value="1" />
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="TabNavigation"
                Value="Once" />
        <Setter Property="BorderThickness"
                Value="0" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TreeView">
                    <Border x:Name="Root"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Background="{TemplateBinding Background}"
                            Padding="{TemplateBinding Padding}"
                            CornerRadius="4">
                        <ScrollViewer x:Name="ScrollViewer"
                                      Background="{x:Null}"
                                      BorderBrush="Transparent"
                                      BorderThickness="0"
                                      IsTabStop="False"
                                      TabNavigation="Once"
                                      HorizontalScrollBarVisibility="Auto"
                                      VerticalScrollBarVisibility="Auto">
                            <ItemsPresenter Margin="5"
                                            x:Name="TreeItems" />
                        </ScrollViewer>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="TreeView"
           BasedOn="{StaticResource FlatTreeViewStyle}" />

    <!-- ComboBoxItem -->
    <Style x:Name="FlatComboBoxItemStyle"
           TargetType="ComboBoxItem">
        <Setter Property="Padding"
                Value="3" />
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Top" />
        <Setter Property="Background"
                Value="Transparent" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="TabNavigation"
                Value="Local" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBoxItem">
                    <Grid Background="{TemplateBinding Background}">
                        <ContentPresenter HorizontalAlignment="Left"
                                          Margin="{TemplateBinding Padding}"
                                          x:Name="contentPresenter"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}" />
                        <Rectangle x:Name="FocusVisualElement"
                                   Visibility="Collapsed"
                                   Stroke="{DynamicResource Theme_PrimaryBrush}"
                                   StrokeThickness="1"
                                   RadiusX="2"
                                   RadiusY="2" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="ComboBoxItem"
           BasedOn="{StaticResource FlatComboBoxItemStyle}" />

    <!-- ComboBox -->
    <Style x:Name="FlatComboBoxStyle"
           TargetType="ComboBox">
        <Setter Property="Height"
                Value="32" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="TabNavigation"
                Value="Once" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="local:FlatDesignProperties.Label"
                Value="Header" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="Padding"
                Value="8,2,8,2" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ComboBox">
                    <Grid x:Name="Root">
                        <Grid.Resources>
                            <local:ColorInterpolator x:Key="DisabledBorderBuilder"
                                                     BaseColor="{DynamicResource Theme_BorderColor}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <local:ColorInterpolator x:Key="DisabledForegroundBuilder"
                                                     BaseColor="{TemplateBinding Foreground}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            
                            <SolidColorBrush x:Key="DisabledBorderBrush"
                                             Color="{Binding Source={StaticResource DisabledBorderBuilder}, Path=ResultColor}" />
                            <SolidColorBrush x:Key="DisabledForegroundBrush"
                                             Color="{Binding Source={StaticResource DisabledForegroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver" />
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BtnArrow" Storyboard.TargetProperty="Fill">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledBorderBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="(TextBlock.Foreground)">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource DisabledForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                       Storyboard.TargetName="HasFocus"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                                <vsm:VisualState x:Name="FocusedDropDown">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00"
                                                                       Storyboard.TargetName="PopupBorder"
                                                                       Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="ValidationStates">
                                <vsm:VisualState x:Name="Valid" />
                                <vsm:VisualState x:Name="InvalidUnfocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="InvalidFocused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <Visibility>Visible</Visibility>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                       Storyboard.TargetProperty="IsOpen">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <system:Boolean>True</system:Boolean>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Border CornerRadius="4"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{DynamicResource Theme_BorderBrush}"
                                BorderThickness="1"
                                Padding="{TemplateBinding Padding}" />
                        <Border x:Name="ContentPresenterBorder">
                            <Grid Height="{TemplateBinding Height}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="25" />
                                </Grid.ColumnDefinitions>
                                <ToggleButton x:Name="DropDownToggle"
                                              HorizontalContentAlignment="Right"
                                              Background="{TemplateBinding Background}"
                                              Grid.ColumnSpan="2"
                                              local:FlatDesignProperties.Label="{TemplateBinding local:FlatDesignProperties.Label}"
                                              Padding="{TemplateBinding Padding}">
                                    <ToggleButton.Style>
                                        <Style TargetType="ToggleButton">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ToggleButton">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*" />
                                                                <ColumnDefinition Width="Auto" />
                                                            </Grid.ColumnDefinitions>
                                                            <vsm:VisualStateManager.VisualStateGroups>
                                                                <vsm:VisualStateGroup x:Name="CommonStates">
                                                                    <vsm:VisualStateGroup.Transitions>
                                                                        <vsm:VisualTransition GeneratedDuration="00:00:00.2" />
                                                                        <vsm:VisualTransition From="Pressed"
                                                                                              GeneratedDuration="00:00:00" />
                                                                        <vsm:VisualTransition From="MouseOver"
                                                                                              GeneratedDuration="00:00:00"
                                                                                              To="Pressed" />
                                                                    </vsm:VisualStateGroup.Transitions>
                                                                    <vsm:VisualState x:Name="Normal" />
                                                                    <vsm:VisualState x:Name="MouseOver">
                                                                        <Storyboard>
                                                                            <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                                                           Storyboard.TargetName="MouseHover"
                                                                                                           Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                <SplineDoubleKeyFrame KeyTime="0"
                                                                                                      Value="0.3" />
                                                                            </DoubleAnimationUsingKeyFrames>
                                                                        </Storyboard>
                                                                    </vsm:VisualState>
                                                                    <vsm:VisualState x:Name="Pressed">
                                                                        <Storyboard>
                                                                            <ThicknessAnimation Duration="00:00:00"
                                                                                                Storyboard.TargetName="Background"
                                                                                                Storyboard.TargetProperty="BorderThickness"
                                                                                                To="2.5,2.5,.5,.5" />
                                                                            <DoubleAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                                                           Storyboard.TargetName="MousePress"
                                                                                                           Storyboard.TargetProperty="(UIElement.Opacity)">
                                                                                <SplineDoubleKeyFrame KeyTime="0"
                                                                                                      Value="0.3" />
                                                                            </DoubleAnimationUsingKeyFrames>
                                                                        </Storyboard>
                                                                    </vsm:VisualState>
                                                                    <vsm:VisualState x:Name="Disabled" />
                                                                </vsm:VisualStateGroup>
                                                                <vsm:VisualStateGroup x:Name="CheckStates">
                                                                    <vsm:VisualState x:Name="Checked">
                                                                        <Storyboard>
                                                                            <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                                                           Storyboard.TargetName="Label"
                                                                                                           Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                        Value="Visible" />
                                                                            </ObjectAnimationUsingKeyFrames>
                                                                        </Storyboard>
                                                                    </vsm:VisualState>
                                                                    <vsm:VisualState x:Name="Unchecked" />
                                                                </vsm:VisualStateGroup>
                                                                <vsm:VisualStateGroup x:Name="FocusStates">
                                                                    <vsm:VisualState x:Name="Focused">
                                                                        <Storyboard>
                                                                            <ObjectAnimationUsingKeyFrames Duration="00:00:00.001"
                                                                                                           Storyboard.TargetName="HasFocus"
                                                                                                           Storyboard.TargetProperty="(UIElement.Visibility)">
                                                                                <DiscreteObjectKeyFrame KeyTime="0"
                                                                                                        Value="Visible" />
                                                                            </ObjectAnimationUsingKeyFrames>
                                                                        </Storyboard>
                                                                    </vsm:VisualState>
                                                                    <vsm:VisualState x:Name="Unfocused" />
                                                                </vsm:VisualStateGroup>
                                                            </vsm:VisualStateManager.VisualStateGroups>
                                                            <TextBlock x:Name="Label"
                                                                       Text="{TemplateBinding local:FlatDesignProperties.Label}"
                                                                       Visibility="Collapsed"
                                                                       VerticalAlignment="Center"
                                                                       Margin="{TemplateBinding Padding}"
                                                                       Foreground="{DynamicResource Theme_WatermarkBrush}" />
                                                            <ContentPresenter x:Name="contentPresenter"
                                                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                              Margin="{TemplateBinding Padding}"
                                                                              RenderTransformOrigin="0.5,0.5"
                                                                              Grid.Column="1">
                                                                <ContentPresenter.RenderTransform>
                                                                    <TransformGroup>
                                                                        <TranslateTransform />
                                                                    </TransformGroup>
                                                                </ContentPresenter.RenderTransform>
                                                            </ContentPresenter>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ToggleButton.Style>
                                    <Path x:Name="BtnArrow"
                                          Fill="{TemplateBinding Foreground}"
                                          Height="4"
                                          HorizontalAlignment="Right"
                                          Margin="0,0,6,0"
                                          Width="8"
                                          Stretch="Uniform"
                                          Data="F1 M 301.14,-189.041L 311.57,-189.041L 306.355,-182.942L 301.14,-189.041 Z " />
                                </ToggleButton>
                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                  Margin="{TemplateBinding Padding}"
                                                  x:Name="ContentPresenter"
                                                  TextBlock.Foreground="{TemplateBinding Foreground}"
                                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                  IsHitTestVisible="False">
                                    <TextBlock Text=" " />
                                </ContentPresenter>
                            </Grid>
                        </Border>
                        <Border x:Name="HasFocus"
                                CornerRadius="4"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1"
                                Padding="{TemplateBinding Padding}"
                                Visibility="Collapsed" />
                        <Border x:Name="ValidationErrorElement"
                                Visibility="Collapsed"
                                BorderBrush="{DynamicResource Theme_ErrorBrush}"
                                BorderThickness="1"
                                CornerRadius="7">
                            <ToolTipService.ToolTip>
                                <ToolTip x:Name="validationTooltip"
                                         DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                         Template="{StaticResource ValidationToolTipTemplate}"
                                         Placement="Right"
                                         PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                                    <ToolTip.Triggers>
                                        <EventTrigger RoutedEvent="Canvas.Loaded">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip"
                                                                                   Storyboard.TargetProperty="IsHitTestVisible">
                                                        <DiscreteObjectKeyFrame KeyTime="0">
                                                            <DiscreteObjectKeyFrame.Value>
                                                                <system:Boolean>true</system:Boolean>
                                                            </DiscreteObjectKeyFrame.Value>
                                                        </DiscreteObjectKeyFrame>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </ToolTip.Triggers>
                                </ToolTip>
                            </ToolTipService.ToolTip>
                            <Grid Height="12"
                                  HorizontalAlignment="Right"
                                  Margin="1,-4,-4,0"
                                  VerticalAlignment="Top"
                                  Width="12"
                                  Background="Transparent">
                                <Path Fill="{DynamicResource Theme_ErrorBrush}"
                                      Margin="1,3,0,0"
                                      Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" />
                                <Path Fill="{DynamicResource Theme_BackgroundBrush}"
                                      Margin="1,3,0,0"
                                      Data="M 0,0 L2,0 L 8,6 L8,8" />
                            </Grid>
                        </Border>
                        <Popup x:Name="Popup">
                            <Border x:Name="PopupBorder"
                                    Height="Auto"
                                    BorderBrush="{DynamicResource Theme_BorderBrush}"
                                    CornerRadius="4"
                                    Background="{TemplateBinding Background}"
                                    BorderThickness="1">
                                <ScrollViewer x:Name="ScrollViewer"
                                              BorderThickness="0"
                                              Padding="1">
                                    <ItemsPresenter />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="ComboBox"
           BasedOn="{StaticResource FlatComboBoxStyle}" />

    <!--ChildWindow-->
    <Style x:Name="FlatChildWindowStyle"
           TargetType="ChildWindow">
        <Setter Property="IsTabStop"
                Value="false" />
        <Setter Property="TabNavigation"
                Value="Cycle" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="HorizontalAlignment"
                Value="Center" />
        <Setter Property="VerticalAlignment"
                Value="Center" />
        <Setter Property="HorizontalContentAlignment"
                Value="Stretch" />
        <Setter Property="VerticalContentAlignment"
                Value="Stretch" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="FontSize"
                Value="16" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_BorderBrush}" />
        <Setter Property="OverlayBrush"
                Value="#7F000000" />
        <Setter Property="OverlayOpacity"
                Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ChildWindow">
                    <Grid x:Name="Root">
                        <Grid.Resources>
                            <Style x:Key="CloseButtonStyle"
                                   TargetType="Button">
                                <Setter Property="Background"
                                        Value="Transparent" />
                                <Setter Property="Foreground"
                                        Value="{DynamicResource Theme_TextBrush}" />
                                <Setter Property="Padding"
                                        Value="3" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Grid x:Name="grid"
                                                  Height="14"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  Width="15"
                                                  Background="#02FFFFFF">
                                                <VisualStateManager.VisualStateGroups>
                                                    <VisualStateGroup x:Name="CommonStates">
                                                        <VisualState x:Name="Normal" />
                                                        <VisualState x:Name="MouseOver">
                                                            <Storyboard>
                                                                <DoubleAnimation Duration="0"
                                                                                 Storyboard.TargetName="X"
                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                 To="0.95" />
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="Pressed">
                                                            <Storyboard>
                                                                <DoubleAnimation Duration="0"
                                                                                 Storyboard.TargetName="X"
                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                 To="0.85" />
                                                            </Storyboard>
                                                        </VisualState>
                                                        <VisualState x:Name="Disabled">
                                                            <Storyboard>
                                                                <DoubleAnimation Duration="0"
                                                                                 Storyboard.TargetName="X"
                                                                                 Storyboard.TargetProperty="Opacity"
                                                                                 To="0.5" />
                                                            </Storyboard>
                                                        </VisualState>
                                                    </VisualStateGroup>
                                                </VisualStateManager.VisualStateGroups>
                                                <Path x:Name="X"
                                                      Stroke="{TemplateBinding Foreground}"
                                                      Stretch="Fill"
                                                      Height="8"
                                                      HorizontalAlignment="Center"
                                                      Margin="0,-1,0,0"
                                                      VerticalAlignment="Center"
                                                      Width="9"
                                                      Opacity="0.7"
                                                      Data="M0,0 L5,5 M5,0 L0,5 z" />
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Grid.Resources>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="WindowStates">
                                <VisualState x:Name="Open">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames BeginTime="0"
                                                                       Storyboard.TargetName="Overlay"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <EasingDoubleKeyFrame KeyTime="0"
                                                                  Value="0" />
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.3"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="0"
                                                                       Storyboard.TargetName="ContentRoot"
                                                                       Storyboard.TargetProperty="(RenderTransform).(Children)[0].ScaleX">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.25"
                                                                  Value="0" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4"
                                                                  Value="1" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.45"
                                                                  Value="1.05"
                                                                  KeySpline="0,0,0.5,1" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.55"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="0"
                                                                       Storyboard.TargetName="ContentRoot"
                                                                       Storyboard.TargetProperty="(RenderTransform).(Children)[0].ScaleY">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="0" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.25"
                                                                  Value="0" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.4"
                                                                  Value="1" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.45"
                                                                  Value="1.05"
                                                                  KeySpline="0,0,0.5,1" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.55"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Closed">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames BeginTime="0"
                                                                       Storyboard.TargetName="Overlay"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <EasingDoubleKeyFrame KeyTime="0"
                                                                  Value="1" />
                                            <EasingDoubleKeyFrame KeyTime="00:00:00.3"
                                                                  Value="0" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="0"
                                                                       Storyboard.TargetName="ContentRoot"
                                                                       Storyboard.TargetProperty="(RenderTransform).(Children)[0].ScaleX">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2"
                                                                  Value="1" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.25"
                                                                  Value="1.05" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.45"
                                                                  Value="0" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames BeginTime="0"
                                                                       Storyboard.TargetName="ContentRoot"
                                                                       Storyboard.TargetProperty="(RenderTransform).(Children)[0].ScaleY">
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.2"
                                                                  Value="1" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.25"
                                                                  Value="1.05" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:00.45"
                                                                  Value="0" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid x:Name="Overlay"
                              HorizontalAlignment="Stretch"
                              Margin="0"
                              VerticalAlignment="Top"
                              Opacity="{TemplateBinding OverlayOpacity}"
                              Background="{TemplateBinding OverlayBrush}" />
                        <Grid x:Name="ContentRoot"
                              Height="{TemplateBinding Height}"
                              HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                              VerticalAlignment="{TemplateBinding VerticalAlignment}"
                              Width="{TemplateBinding Width}"
                              RenderTransformOrigin="0.5,0.5">
                            <Grid.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform />
                                    <SkewTransform />
                                    <RotateTransform />
                                    <TranslateTransform />
                                </TransformGroup>
                            </Grid.RenderTransform>
                            <Border
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="4">

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Border x:Name="Chrome"
                                                Width="Auto"
                                                BorderBrush="{DynamicResource Theme_BorderBrush}"
                                                BorderThickness="0,0,0,1"
                                                Background="Transparent"
                                                Padding="0,2">
                                        <Grid Height="Auto"
                                                  Width="Auto">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="30" />
                                            </Grid.ColumnDefinitions>
                                            <ContentControl HorizontalAlignment="Stretch"
                                                                Margin="10,5"
                                                                VerticalAlignment="Center"
                                                                FontWeight="Bold"
                                                                IsTabStop="False"
                                                                Content="{TemplateBinding Title}"
                                                                Foreground="{DynamicResource Theme_TextBrush}" />
                                            <Button x:Name="CloseButton"
                                                        Height="14"
                                                        HorizontalAlignment="Center"
                                                        Style="{StaticResource CloseButtonStyle}"
                                                        VerticalAlignment="Center"
                                                        Width="15"
                                                        IsTabStop="False"
                                                        Grid.Column="1" />
                                        </Grid>
                                    </Border>
                                    <ContentPresenter x:Name="ContentPresenter"
                                                              Grid.Row="1"
                                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                              Content="{TemplateBinding Content}"
                                                              ContentTemplate="{TemplateBinding ContentTemplate}"/>
                                </Grid>
                            </Border>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="ChildWindow"
           BasedOn="{StaticResource FlatChildWindowStyle}" />

    <!-- HyperlinkButton -->
    <Style x:Name="FlatHyperlinkButtonStyle"
           TargetType="HyperlinkButton">
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_PrimaryBrush}" />
        <Setter Property="FontSize"
                Value="14" />
        <Setter Property="Padding"
                Value="0,2,2,2" />
        <Setter Property="Cursor"
                Value="Hand" />
        <Setter Property="HorizontalContentAlignment"
                Value="Left" />
        <Setter Property="VerticalContentAlignment"
                Value="Top" />
        <Setter Property="Background"
                Value="Transparent" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="HyperlinkButton">
                    <Grid Cursor="{TemplateBinding Cursor}"
                          Background="{TemplateBinding Background}"
                          VerticalAlignment="Center">
                        <Grid.Resources>
                            <local:ColorInterpolator x:Key="DisabledForegroundBuilder"
                                                     BaseColor="{TemplateBinding Foreground}"
                                                     TargetColor="{DynamicResource Theme_BackgroundColor}"
                                                     DesaturationRatio="{DynamicResource Theme_DisabledDesaturationRatio}"
                                                     InterpolationRatio="{DynamicResource Theme_DisabledInterpolationRatio}"/>
                            <SolidColorBrush x:Key="DisabledBrush"
                                             Color="{Binding Source={StaticResource DisabledForegroundBuilder}, Path=ResultColor}" />
                        </Grid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0"
                                                                       Storyboard.TargetName="UnderlineTextBlock"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0"
                                                                       Storyboard.TargetName="UnderlineTextBlock"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0"
                                                                       Storyboard.TargetName="DisabledOverlay"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                            <vsm:VisualStateGroup x:Name="FocusStates">
                                <vsm:VisualState x:Name="Focused">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0"
                                                                       Storyboard.TargetName="FocusTextBlock"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="Unfocused" />
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <TextBlock HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                   Margin="{TemplateBinding Padding}"
                                   x:Name="UnderlineTextBlock"
                                   VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                   Visibility="Collapsed"
                                   Text="{TemplateBinding Content}"
                                   TextDecorations="Underline"
                                   Foreground="{TemplateBinding Foreground}" />
                        <TextBlock HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                   Margin="{TemplateBinding Padding}"
                                   x:Name="FocusTextBlock"
                                   VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                   Visibility="Collapsed"
                                   Text="{TemplateBinding Content}"
                                   Foreground="{TemplateBinding Foreground}">
                            <TextBlock.Effect>
                                <DropShadowEffect ShadowDepth="0"
                                                  Color="{Binding ElementName=FocusTextBlock, Path=Foreground.(SolidColorBrush.Color)}"
                                                  Opacity=".1"
                                                  BlurRadius="2" />
                            </TextBlock.Effect>
                        </TextBlock>
                        <TextBlock HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                   Margin="{TemplateBinding Padding}"
                                   x:Name="DisabledOverlay"
                                   VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                   Visibility="Collapsed"
                                   Canvas.ZIndex="1"
                                   Foreground="{StaticResource DisabledBrush}"
                                   Text="{TemplateBinding Content}" />
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          Margin="{TemplateBinding Padding}"
                                          x:Name="contentPresenter"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="HyperlinkButton"
           BasedOn="{StaticResource FlatHyperlinkButtonStyle}" />

    <!--  ToolTip  -->
    <Style TargetType="ToolTip">
        <Setter Property="Background"
                Value="{DynamicResource Theme_ControlBackgroundBrush}" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_BorderBrush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="Padding"
                Value="3" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolTip">
                    <Border x:Name="Root"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Background="{TemplateBinding Background}"
                            CornerRadius="5"
                            Padding="{TemplateBinding Padding}">
                        <ContentPresenter Cursor="{TemplateBinding Cursor}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}"
                                          Content="{TemplateBinding Content}"
                                          Margin="{TemplateBinding Padding}" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>


    <!--  ContextMenu  -->
    <Style x:Key="FlatContextMenuStyle"
        TargetType="ContextMenu">
        <Setter Property="Background"
                Value="{DynamicResource Theme_BackgroundBrush}" />
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_BorderBrush}" />
        <Setter Property="Padding"
                Value="2" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ContextMenu">
                    <Border x:Name="ContextBorder" BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Background="{TemplateBinding Background}"
                            CornerRadius="4">
                        <Border.Effect>
                            <DropShadowEffect ShadowDepth="0"
                          Color="{Binding ElementName=ContextBorder, Path=BorderBrush.(SolidColorBrush.Color)}"
                          Opacity="1"
                          BlurRadius="2" />
                        </Border.Effect>
                        <Grid>
                            <Border CornerRadius="4"
                                    Background="{DynamicResource Theme_BackgroundBrush}"
                                    Opacity="0.7"
                                    Width="28"
                                    Margin="2"
                                    HorizontalAlignment="Left" />
                            <Border  CornerRadius="4"                             
                                    Background="{DynamicResource Theme_BackgroundBrush}"
                                    Opacity="0.9"
                                    Width="1"
                                    Margin="30,2,0,2"
                                    HorizontalAlignment="Left" />
                            <Border   CornerRadius="4" 
                                    Background="{DynamicResource Theme_BackgroundBrush}"
                                    Opacity="0.9"
                                    Width="1"
                                    Margin="31,2,0,2"
                                    HorizontalAlignment="Left" />
                            <ItemsPresenter Margin="{TemplateBinding Padding}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="ContextMenu"
           BasedOn="{StaticResource FlatContextMenuStyle}"/>

    <!--  MenuItem  -->
    <Style x:Key="FlatMenuItemStyle"
        TargetType="MenuItem">
        <Setter Property="Background"
                Value="Transparent" />
        <Setter Property="BorderBrush"
                Value="Transparent" />
        <Setter Property="Padding"
                Value="4,3,2,3" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="MenuItem">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0"
                                                         Storyboard.TargetName="Presenter"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="0.5" />
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Unfocused" />
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0"
                                                         Storyboard.TargetName="Bg"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="1" />
                                        <DoubleAnimation Duration="0"
                                                         Storyboard.TargetName="InnerBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         To="0.25" />
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Presenter" Storyboard.TargetProperty="(TextBlock.Foreground)">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{DynamicResource Theme_TextOnPrimaryBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border CornerRadius="2"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1" />
                        <Border x:Name="Bg"
                                CornerRadius="4"
                                BorderBrush="Transparent"
                                Background="{DynamicResource Theme_PrimaryBrush}"
                                BorderThickness="1"
                                Opacity="0">
                        </Border>
                        <Border x:Name="InnerBorder"
                                CornerRadius="4"
                                Opacity="0"
                                BorderBrush="{DynamicResource Theme_BorderBrush}"
                                BorderThickness="1"
                                Margin="1" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"
                                                  MinWidth="24" />
                                <ColumnDefinition Width="4" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="17" />
                            </Grid.ColumnDefinitions>
                            <ContentPresenter Content="{TemplateBinding Icon}"
                                              Margin="1"
                                              VerticalAlignment="Center" />

                            <ContentPresenter x:Name="Presenter"
                                              Content="{TemplateBinding Header}"
                                              ContentTemplate="{TemplateBinding HeaderTemplate}"
                                              Margin="{TemplateBinding Padding}"
                                              Grid.Column="2" />

                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="MenuItem"
           BasedOn="{StaticResource FlatMenuItemStyle}"/>

    <!--  Separator  -->
    <Style x:Key="FlatSeparatorStyle"
        TargetType="Separator">
        <Setter Property="Background"
                Value="{DynamicResource Theme_BorderBrush}" />
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="Margin"
                Value="32,2,2,2" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Separator">
                    <Border BorderThickness="{TemplateBinding BorderThickness}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            Background="{TemplateBinding Background}"
                            Height="1" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="Separator"
           BasedOn="{StaticResource FlatSeparatorStyle}"/>

    <!--  Thumb  -->
    <Style x:Key="FlatThumbStyle"
        TargetType="Thumb">
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="Background"
                Value="{DynamicResource Theme_ContainerBackgroundBrush}"/>
        <Setter Property="Foreground"
                Value="{DynamicResource Theme_TextBrush}"/>
        <Setter Property="BorderBrush"
                Value="{DynamicResource Theme_BorderBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Thumb">
                    <Grid Cursor="Hand">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ColorChange"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value=".20" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ColorChange"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value=".1" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="DisabledVisualElement"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value=".55" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="Unfocused"
                                                      GeneratedDuration="0:0:1"
                                                      To="Focused" />
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="FocusVisualElement"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <SplineDoubleKeyFrame KeyTime="0"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused" />
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Rectangle x:Name="FocusVisualElement"
                                   Stroke="{DynamicResource Theme_PrimaryBrush}"
                                   StrokeThickness="3"
                                   RadiusX="100"
                                   RadiusY="100"
                                   Margin="-2"
                                   Opacity="0"
                                   IsHitTestVisible="false" />
                        <Border x:Name="Background"
                                Background="{TemplateBinding Background}"
                                BorderBrush="Transparent"
                                BorderThickness="0"
                                CornerRadius="100">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="0"
                                         Color="{TemplateBinding BorderBrush}"
                                         Opacity="0.4"
                                         BlurRadius="2" />
                            </Border.Effect>
                            <Border x:Name="ColorChange"
                                    Background="{TemplateBinding Foreground}"
                                    Opacity=".35"
                                    CornerRadius="100" />
                        </Border>
                        <Rectangle x:Name="DisabledVisualElement"
                                   Fill="{DynamicResource Theme_DisableBrush}"
                                   RadiusX="100"
                                   RadiusY="100"
                                   IsHitTestVisible="false"
                                   Opacity="0" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="Thumb"
           BasedOn="{StaticResource FlatThumbStyle}"/>

    <!-- ProgressBar -->
    <Style TargetType="ProgressBar">
        <Setter Property="Foreground" 
                Value="{DynamicResource Theme_PrimaryBrush}"
                />
        <Setter Property="Background"
                Value="{DynamicResource Theme_BorderBrush}"
                />
        <Setter Property="MinHeight"
                Value="8" />
        <Setter Property="MinWidth"
                Value="100"/>
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Maximum" Value="100" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ProgressBar">
                    <Grid x:Name="Root">
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates">
                                <vsm:VisualState x:Name="Determinate" />
                                <vsm:VisualState x:Name="Indeterminate">
                                    <Storyboard RepeatBehavior="Forever">
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00" Storyboard.TargetName="IndeterminateRoot" Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Duration="00:00:00" Storyboard.TargetName="DeterminateRoot" Storyboard.TargetProperty="(UIElement.Visibility)">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="IndeterminateGradientFill" Storyboard.TargetProperty="(Shape.Fill).(LinearGradientBrush.Transform).(TransformGroup.Children)[0].X">
                                            <SplineDoubleKeyFrame KeyTime="0" Value="0" />
                                            <SplineDoubleKeyFrame KeyTime="00:00:.5" Value="20" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Border x:Name="ProgressBarTrack" Background="{TemplateBinding BorderBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="4,4,4,4" />
                        <Grid x:Name="ProgressBarRootGrid">
                            <Grid x:Name="IndeterminateRoot" Visibility="Collapsed">
                                <Rectangle Margin="{TemplateBinding BorderThickness}" x:Name="IndeterminateSolidFill" Opacity="1" RenderTransformOrigin="0.5,0.5" RadiusX="4" RadiusY="4" Fill="{TemplateBinding Foreground}" Stroke="{DynamicResource Theme_PrimaryBrush}" StrokeThickness="0" />
                                <Rectangle Margin="{TemplateBinding BorderThickness}" x:Name="IndeterminateGradientFill" Opacity="0.7" RadiusX="4" RadiusY="4" StrokeThickness="1" Fill="{DynamicResource Theme_BackgroundBrush}" />
                            </Grid>
                            <Grid x:Name="DeterminateRoot">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Border Background="{TemplateBinding Background}" CornerRadius="0,4,4,0" Grid.Column="1" Margin="-4,1,1,1" Opacity="0.5">
 
                                </Border>
                                <Border x:Name="ProgressBarIndicator" CornerRadius="4,4,4,4" Background="{TemplateBinding Foreground}" Margin="1,1,1,1" />
                            </Grid>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
